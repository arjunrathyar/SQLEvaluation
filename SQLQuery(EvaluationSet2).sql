CREATE TABLE COMPUTER(
	SerialNumber INT PRIMARY KEY,
	MfName VARCHAR(20),
	Model VARCHAR(20),
	Weight DECIMAL(9,2),
	EmployeeID INT,
	FOREIGN KEY (MfName) REFERENCES MANUFACTURER(MfName),
	FOREIGN KEY (EmployeeID) REFERENCES EMPLOYEE(EmployeeID) 
)

CREATE TABLE EMPLOYEE(
	EmployeeID INT PRIMARY KEY,
	EmpName VARCHAR(20),
	Phone VARCHAR(10),
	Email VARCHAR(20)
)

CREATE TABLE MANUFACTURER(
	MfName VARCHAR(20) PRIMARY KEY,
	City VARCHAR(20),
	State VARCHAR(20)
)

ALTER TABLE MANUFACTURER ADD AreaCode INT

ALTER TABLE COMPUTER ADD USESTATE INT

INSERT INTO MANUFACTURER VALUES ('NISSAN','TOKYO','JAPAN',201)
INSERT INTO MANUFACTURER VALUES ('MITSUBISHI','SOUTH DAKOTA','X',202)
INSERT INTO MANUFACTURER VALUES ('ACURA','QUEENSLAND','AUSTRALIA',203)
INSERT INTO MANUFACTURER VALUES ('HONDA','TOKYO','JAPAN',301)

INSERT INTO EMPLOYEE VALUES (101,'SMOKY','1234567890','SMOKED@GMAIL.COM')
INSERT INTO EMPLOYEE VALUES (102,'SUKY','1234567890','SMOKED@GMAIL.COM')
INSERT INTO EMPLOYEE VALUES (104,'YUKI','1234567890','SMOKED@GMAIL.COM')
INSERT INTO EMPLOYEE VALUES (105,'HEIMER','1234567890','SMOKED@GMAIL.COM')

INSERT INTO COMPUTER VALUES (1,'NISSAN','Z',1000,101)
INSERT INTO COMPUTER VALUES (2,'MITSUBISHI','PAJERO',1500,102)
INSERT INTO COMPUTER VALUES (3,'NISSAN','GTR',1200,101)
INSERT INTO COMPUTER VALUES (4,'ACURA','NSX',1100,104)
INSERT INTO COMPUTER VALUES (5,'HONDA','CIVIC TYPE R',1100,105)

UPDATE COMPUTER SET USESTATE=1 WHERE SerialNumber=1
UPDATE COMPUTER SET USESTATE=0 WHERE SerialNumber=2
UPDATE COMPUTER SET USESTATE=1 WHERE SerialNumber=3
UPDATE COMPUTER SET USESTATE=0 WHERE SerialNumber=4
UPDATE COMPUTER SET USESTATE=1 WHERE SerialNumber=5

SELECT * FROM COMPUTER
SELECT * FROM EMPLOYEE
SELECT * FROM MANUFACTURER

--1

SELECT COMPUTER.MfName AS 'Manufacturer Names' FROM COMPUTER JOIN MANUFACTURER ON COMPUTER.MfName = MANUFACTURER.MfName WHERE MANUFACTURER.City = 'SOUTH DAKOTA'

--2

SELECT * FROM COMPUTER
SELECT MfName AS 'Manufacturer Name',AVG(Weight) AS 'AVG Weight' FROM COMPUTER WHERE USESTATE=1 GROUP BY MfName

--3

SELECT * FROM MANUFACTURER
SELECT * FROM MANUFACTURER WHERE CAST(AreaCode AS VARCHAR(20)) LIKE '2%'

--4

SELECT * FROM COMPUTER
SELECT AVG(Weight) FROM COMPUTER
SELECT SerialNumber,Weight FROM COMPUTER WHERE Weight < (SELECT AVG(Weight) FROM COMPUTER)

--5

SELECT MfName AS 'Manufacturer Name' FROM COMPUTER WHERE USESTATE = (SELECT TOP 1 USESTATE FROM COMPUTER WHERE USESTATE != 1)

--6

SELECT E.EmpName, C.SerialNumber, M.City FROM EMPLOYEE E 
JOIN COMPUTER C ON E.EmployeeID = C.EmployeeID 
JOIN MANUFACTURER M ON C.MfName = M.MfName

--7

CREATE PROCEDURE P1
@eid INT
AS
BEGIN
	SELECT SerialNumber,MfName,Model,Weight,EmployeeID FROM COMPUTER WHERE EmployeeID=@eid
END

EXEC P1 @eid=101
